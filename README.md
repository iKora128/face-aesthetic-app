# Face Aesthetic AI ğŸ­âœ¨

**æ¬¡ä¸–ä»£AIé¡”é¢ç¾å®¹åˆ†æãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **

æœ€å…ˆç«¯ã®AIæŠ€è¡“ã¨éŸ“å›½ç¾å®¹ã®å°‚é–€çŸ¥è­˜ã‚’çµ„ã¿åˆã‚ã›ãŸã€åŒ…æ‹¬çš„ãªç¾å®¹åˆ†æãƒ»ç›¸è«‡ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

[![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green.svg)](https://fastapi.tiangolo.com)
[![Next.js](https://img.shields.io/badge/Next.js-14+-black.svg)](https://nextjs.org)
[![TypeScript](https://img.shields.io/badge/TypeScript-5+-blue.svg)](https://www.typescriptlang.org)
[![Docker](https://img.shields.io/badge/Docker-Compose-blue.svg)](https://docker.com)

## ğŸŒŸ ä¸»è¦æ©Ÿèƒ½

### ğŸ”¬ **é«˜ç²¾åº¦AIåˆ†æ**
- **468ç‚¹é¡”é¢ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯**æ¤œå‡ºï¼ˆMediaPipeï¼‰
- **8ã¤ã®ç¾å®¹æŒ‡æ¨™**ã«ã‚ˆã‚‹ç§‘å­¦çš„åˆ†æ
- **éŸ“å›½ç¾å®¹åŸºæº–**ã«åŸºã¥ãè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
- **é»„é‡‘æ¯”ç†è«–**ã¨ã®æ¯”è¼ƒåˆ†æ

### ğŸ’¬ **AIç¾å®¹ã‚³ãƒ³ã‚µãƒ«ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**
- **ChatGPT-4o-mini**æ­è¼‰ã®å°‚é–€AI
- **éŸ“å›½ç¾å®¹ã®ãƒ—ãƒ­**ã«ã‚ˆã‚‹å€‹åˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›¸è«‡**æ©Ÿèƒ½
- **ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸ**æ”¹å–„ææ¡ˆ

### ğŸ“Š **ç¾ã—ã„ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ**
- **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ**ï¼ˆmatplotlib + PILï¼‰
- **ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ**ã§ã®æ¯”è¼ƒè¡¨ç¤º
- **è©³ç´°ã‚¹ã‚³ã‚¢**ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³
- **æ”¹å–„ã‚¢ãƒ‰ãƒã‚¤ã‚¹**ä»˜ããƒ¬ãƒãƒ¼ãƒˆ

### ğŸ“± **ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**
- **Next.js Webã‚¢ãƒ—ãƒª**ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰
- **LINE Bot**çµ±åˆï¼ˆç”»åƒåˆ†æ + AIç›¸è«‡ï¼‰
- **Future: Flutter**ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå¯¾å¿œäºˆå®š

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```mermaid
graph TB
    A[Next.js Frontend] --> B[FastAPI Backend]
    C[LINE Bot] --> B
    B --> D[Supabase Database]
    B --> E[Supabase Storage]
    B --> F[OpenAI GPT-4o-mini]
    B --> G[MediaPipe AI]
    B --> H[Redis Cache]
    
    subgraph "åˆ†æã‚¨ãƒ³ã‚¸ãƒ³"
        G --> I[468ç‚¹ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯]
        I --> J[ç¾å®¹ã‚¹ã‚³ã‚¢è¨ˆç®—]
        J --> K[ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ]
    end
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- **Docker & Docker Compose** (æœ€æ–°ç‰ˆ)
- **Node.js 18+** (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚)
- **Python 3.12+** with uv (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚)

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/your-username/face-aesthetic-app.git
cd face-aesthetic-app
```

### 2. ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç’°å¢ƒå¤‰æ•°
cp backend/.env.example backend/.env

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒå¤‰æ•°  
cp frontend/.env.example frontend/.env.local
```

**é‡è¦ãªç’°å¢ƒå¤‰æ•°:**
```env
# Supabase (å¿…é ˆ)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key

# OpenAI (å¿…é ˆ)
OPENAI_API_KEY=sk-your-openai-key
OPENAI_MODEL=gpt-4o-mini

# LINE Bot (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
LINE_CHANNEL_ACCESS_TOKEN=your-line-token
LINE_CHANNEL_SECRET=your-line-secret
```

### 3. é–‹ç™ºç’°å¢ƒèµ·å‹•

```bash
# é–‹ç™ºç’°å¢ƒï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œï¼‰
docker compose -f docker-compose.yml -f docker-compose.dev.yml up

# ã¾ãŸã¯æœ¬ç•ªç’°å¢ƒ
docker compose --profile production up -d
```

### 4. ã‚¢ã‚¯ã‚»ã‚¹

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:3000
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: http://localhost:8000
- **API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: http://localhost:8000/docs
- **å¥åº·çŠ¶æ…‹ç¢ºèª**: http://localhost:8000/health

## ğŸ› ï¸ é–‹ç™ºç’°å¢ƒ

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™º
cd backend
uv sync
uv run uvicorn app.main:app --reload

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º
cd frontend  
npm install
npm run dev

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
cd backend
uv run pytest tests/ -v
```

### Dockeré–‹ç™ºç’°å¢ƒ

```bash
# é–‹ç™ºç”¨ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ + ãƒ‡ãƒãƒƒã‚°ï¼‰
docker compose -f docker-compose.yml -f docker-compose.dev.yml up

# ãƒ­ã‚°ç¢ºèª
docker compose logs -f backend
docker compose logs -f frontend

# ã‚³ãƒ³ãƒ†ãƒŠã«æ¥ç¶š
docker compose exec backend bash
docker compose exec frontend sh
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### è‡ªå‹•ãƒ†ã‚¹ãƒˆ

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cd backend
uv run pytest tests/ -v --cov=app

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆ
uv run pytest tests/test_analysis.py -v

# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
uv run pytest --cov=app --cov-report=html
```

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

```bash
# APIå¥åº·ç¢ºèª
curl http://localhost:8000/health

# åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
curl -X POST "http://localhost:8000/api/v1/analysis/analyze" \
  -F "file=@test_image.jpg"

# LINE Botæƒ…å ±
curl http://localhost:8000/api/v1/linebot/info
```

## ğŸ”§ è¨­å®šãƒ»ç’°å¢ƒåˆ¥ãƒ‡ãƒ—ãƒ­ã‚¤

### Supabaseè¨­å®š

1. [Supabase](https://supabase.com)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. `backend/app/schemas/supabase.py`ã®SQLã‚’å®Ÿè¡Œ
3. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆ`face-analysis-images`, `analysis-reports`ï¼‰
4. RLSãƒãƒªã‚·ãƒ¼è¨­å®š

### LINE Botè¨­å®š

1. [LINE Developers](https://developers.line.biz/)ã§ãƒãƒ£ãƒ³ãƒãƒ«ä½œæˆ
2. Webhook URLè¨­å®š: `https://your-domain.com/api/v1/linebot/webhook`
3. å¿…è¦ãªæ¨©é™ã‚’æœ‰åŠ¹åŒ–

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Vercel (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰)
cd frontend
vercel --prod

# Railway/Render (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)
# Dockerfileã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤

# ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯Docker
docker compose --profile production up -d
```

è©³ç´°ãªè¨­å®šã¯ [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
face-aesthetic-app/
â”œâ”€â”€ ğŸ¨ frontend/                 # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                 # App Router
â”‚   â”‚   â”œâ”€â”€ components/          # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/               # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ lib/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ types/               # TypeScriptå‹å®šç¾©
â”‚   â””â”€â”€ public/                  # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚
â”œâ”€â”€ ğŸš€ backend/                  # FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/              # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ core/                # åˆ†æã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ models/              # Pydanticãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ services/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ utils/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
â”‚
â”œâ”€â”€ ğŸ³ Dockerè¨­å®š
â”‚   â”œâ”€â”€ docker-compose.yml       # æœ¬ç•ªç’°å¢ƒ
â”‚   â”œâ”€â”€ docker-compose.dev.yml   # é–‹ç™ºç’°å¢ƒ
â”‚   â””â”€â”€ nginx/                   # ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
â”‚
â”œâ”€â”€ ğŸ“š docs/                     # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ ğŸ—‚ï¸ legacy/                   # ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ ğŸ“‹ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ”„ Redis ã®å½¹å‰²

### ãªãœRedisãŒå¿…è¦ï¼Ÿ

1. **ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**
   ```python
   # åˆ†æçµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ10åˆ†é–“ï¼‰
   redis.setex(f"analysis:{image_hash}", 600, analysis_result)
   ```

2. **âš¡ ãƒ¬ãƒ¼ãƒˆåˆ¶é™**
   ```python
   # APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆ1åˆ†é–“ã«10å›ï¼‰
   redis.incr(f"rate_limit:{user_id}", ttl=60)
   ```

3. **ğŸ’¾ ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**
   ```python
   # ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   redis.hset(f"chat_session:{session_id}", session_data)
   ```

4. **ğŸ”„ éåŒæœŸã‚¿ã‚¹ã‚¯**
   ```python
   # é‡ã„åˆ†æå‡¦ç†ã®ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°
   redis.lpush("analysis_queue", task_data)
   ```

### Redisä½¿ç”¨ä¾‹

- **åˆ†æçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥**: åŒã˜ç”»åƒã®å†åˆ†æã‚’é˜²æ­¢
- **APIãƒ¬ãƒ¼ãƒˆåˆ¶é™**: æ‚ªç”¨é˜²æ­¢ã¨ã‚µãƒ¼ãƒãƒ¼ä¿è­·
- **LINE Botå¿œç­”**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é‡è¤‡å‡¦ç†é˜²æ­¢
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ã®é«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **ğŸ›¡ï¸ CORSè¨­å®š**: è¨±å¯ã•ã‚ŒãŸãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿
- **ğŸ”‘ ç’°å¢ƒå¤‰æ•°**: æ©Ÿå¯†æƒ…å ±ã®å®‰å…¨ãªç®¡ç†
- **ğŸš« ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: DDoSæ”»æ’ƒé˜²æ­¢
- **âœ… å…¥åŠ›æ¤œè¨¼**: Pydanticã«ã‚ˆã‚‹å³å¯†ãªæ¤œè¨¼
- **ğŸ”’ SSL/TLS**: HTTPSé€šä¿¡ã®å¼·åˆ¶

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. **Fork** the repository
2. **Create** your feature branch (`git checkout -b feature/amazing-feature`)
3. **Commit** your changes (`git commit -m 'Add amazing feature'`)
4. **Push** to the branch (`git push origin feature/amazing-feature`)
5. **Open** a Pull Request

### é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

- **ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«**: Ruff (backend), Prettier (frontend)
- **å‹ãƒã‚§ãƒƒã‚¯**: mypy (backend), TypeScript (frontend)
- **ãƒ†ã‚¹ãƒˆ**: pytest (backend), Jest (frontend)
- **ã‚³ãƒŸãƒƒãƒˆ**: Conventional Commitså½¢å¼

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [MIT License](LICENSE) ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

- **ğŸ› ãƒã‚°å ±å‘Š**: [Issues](https://github.com/your-username/face-aesthetic-app/issues)
- **ğŸ’¡ æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: [Discussions](https://github.com/your-username/face-aesthetic-app/discussions)
- **ğŸ“§ ãŠå•ã„åˆã‚ã›**: support@face-aesthetic.ai

## ğŸ™ è¬è¾

- **MediaPipe** - Google ã®é¡”é¢ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯æ¤œå‡º
- **OpenAI** - GPT-4o-mini AIæŠ€è¡“
- **Supabase** - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©
- **LINE** - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

---

<div align="center">

**Made with â¤ï¸ in Tokyo, Japan**

[ğŸŒ Website](https://face-aesthetic.ai) â€¢ [ğŸ“± LINE Bot](https://line.me/R/ti/p/@face-aesthetic) â€¢ [ğŸ“§ Contact](mailto:team@face-aesthetic.ai)

</div>